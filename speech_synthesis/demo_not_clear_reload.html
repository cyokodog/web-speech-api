<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="cache-control" content="no-cache">
    <meta name="viewport" content="width=device-width">
    <title>リロードで停止しないデモ | Web Speech API -> speechSynthesis</title>
    <link rel='stylesheet' href='demo.css' type='text/css'/>
  </head>
  <body>
    <h1>リロードで停止しないデモ</h1>
    <input class="text" value="Web Speech API を使ってみよう！"/>
    <input class="count" type="number" value="3"/>回連続で<button onclick="speak()">speak()</button>
    <p>
      音声再生中に
      <button onclick="reload()">reload()</button>
      をクリックしてください
    </p>

<script>
function speak(){
  var text = document.querySelector('.text').value;
  var count = +document.querySelector('.count').value;
  for(var i=0; i<count; i++){
    speechSynthesis.speak(
      new SpeechSynthesisUtterance(text)
    );
  }
}
function reload(){
  window.location.reload();
}

</script>

  </body>
</html>
